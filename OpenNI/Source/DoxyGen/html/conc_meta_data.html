<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenNI 1.5.4: Frame Objects and Metadata Objects</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="OpenNILogo.bmp"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">OpenNI 1.5.4
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">OpenNI Overview</a></li><li class="navelem"><a class="el" href="concepts.html">Concepts</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Frame Objects and Metadata Objects </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The metadata classes provide <a class="el" href="glossary.html#glos_frame_object">frame objects</a> to corresponding generator nodes to provide fast data access. For example, a <a class="el" href="classxn_1_1_depth_meta_data.html">DepthMetaData</a> object provides a frame object for a <a class="el" href="classxn_1_1_depth_generator.html">DepthGenerator</a> node. Many types of generator nodes are provided with frame objects (e.g., DepthGenerator and <a class="el" href="classxn_1_1_image_generator.html">ImageGenerator</a>), but not all types of generator nodes (e.g., <a class="el" href="classxn_1_1_hands_generator.html">xn::HandsGenerator</a>).</p>
<p>In addition, the frame objects are used to freeze the configuration of a node at the time this data arrived. Sometimes an application changes the configuration of a node while reading data from it. In such a case, and until new data arrives, the data received from this node was produced using a different configuration. For example, lets say a <a class="el" href="classxn_1_1_depth_generator.html">DepthGenerator</a> node was configured to produce QVGA depth maps, and the application constantly reads data from it. At some point, the application changes the node output mode to VGA. Until the moment a new frame arrives, calling <a class="el" href="classxn_1_1_depth_generator.html#a458fcf1a5fdccae1fc9318b096838927">xn::DepthGenerator::GetDepthMap()</a> would return a QVGA map, but calling <a class="el" href="classxn_1_1_map_generator.html#a40597eefb2a6cdfc25fbf7c745bbc29c">xn::DepthGenerator::GetMapOutputMode()</a> would return VGA resolution. This might cause errors (or even an access violation) in the application.</p>
<p>To solve this, each node has a frame object, keeping the properties of the data when it was read. So, in the above case, by calling <a class="el" href="classxn_1_1_depth_generator.html#a477824833600d2fc939df010e87cf2e7">xn::DepthGenerator::GetMetaData()</a> you would get a <a class="el" href="classxn_1_1_depth_meta_data.html">xn::DepthMetaData</a> object. This object <a class="el" href="classxn_1_1_depth_meta_data.html#afd1ec57aaa35d153556fadb140ed923f">Data()</a> method would return a pointer to the QVGA depth map, and the <a class="el" href="classxn_1_1_map_meta_data.html#ac01e305fdb0a76091275c8f21a380c0d">XRes()</a> and <a class="el" href="classxn_1_1_map_meta_data.html#ab5ed6e603cd13e07e03d9b60d7d02684">YRes()</a> functions would return QVGA resolution.</p>
<p>Metadata objects hold <code>const</code> pointers to the data (since this is what is returned from the generators). C++ <em>metadata</em> objects (all objects inheriting from <a class="el" href="classxn_1_1_output_meta_data.html">xn::OutputMetaData</a>) also provide a way to replace the data buffer with a self-allocated buffer, which can also be written to. Use the <a class="el" href="classxn_1_1_output_meta_data.html#a62c3847520da5bb1c27a139ec8d62e7f">AllocateData()</a> function for allocating a clean buffer, or the <a class="el" href="classxn_1_1_output_meta_data.html#a70d17b28fc0127d0ac10b6dc58942e97">MakeDataWritable()</a> function for also copying data from the buffer into the newly allocated writable buffer.</p>
<p>Also, the metadata objects support several types of copying:</p><ul>
<li>All <em>InitFrom</em> functions actually perform the shallow copy made by C functions (<a class="el" href="group__utils.html#gaf7a971f1de32664bc1563e9e30b7dcdb">xnCopyDepthMetaData()</a> for example).</li>
<li>All <em>CopyFrom</em> functions allocates a new buffer and copies data to it (so that destination object now points to a private copy of the data of the source object).</li>
</ul>
<p>Currently this creates a situation in which the functionality supplied by C and C++ interfaces is not the same. This is planned to be fixed in future versions. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 4 2019 12:14:05 for OpenNI 1.5.4 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
